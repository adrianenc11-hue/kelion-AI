# K1 Forensic Audit
- time_utc: 2026-02-06T13:24:02.483Z
- base: https://kelionai.app
- timeoutMs: 25000
- authProvided: false

## Summary
- total: 12
- ok_2xx: 7
- needs_input_400: 3
- server_5xx: 2
- other_fail: 0

## 5xx Priority Fix List (proof-based)
- **dalle** (HTTP 500) — SERVER_BUG
  - hint: Unhandled exception in function. Add try/catch + structured error output + check logs.
  - proof: `{"error":"400 Invalid value: '512x512'. Supported values are: '1024x1024', '1024x1792', and '1792x1024'."}`
- **run-migration** (HTTP 503) — DB
  - hint: Database/storage connectivity/config issue (Supabase URL/key, tables, migrations).
  - proof: `{"error":"Database connection failed","message":"getaddrinfo ENOTFOUND db.lqhkqznjdrkuvtpsgwhq.supabase.co","hint":"Check DATABASE_URL format and credentials","config_issue":true}`

## Full Results
### health
- GET https://kelionai.app/.netlify/functions/health
- status: 200 | latency_ms: 719
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{
  "healthy": true,
  "timestamp": "2026-02-06T13:24:02.931Z",
  "environment": {
    "configured": 7,
    "total": 7,
    "details": {
      "LLM_API_KEY": true,
      "TTS_API_KEY": true,
      "SEARCH_API_KEY": true,
      "DB_URL": true,
      "VECTOR_DB_API_KEY": true,
      "ENCRYPTION_KEY": true,
      "JWT_SIGNING_KEY": true
    }
  },
  "services": {
    "chat": "ready",
    "tts": "ready",
    "search": "ready",
    "memory": "ready",
    "encryption": "ready"
  }
}
```

### realtime-token
- GET https://kelionai.app/.netlify/functions/realtime-token
- status: 200 | latency_ms: 839
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{"object":"realtime.session","id":"sess_D6G6VAxJ87OgLXlHSnDVz","model":"gpt-4o-realtime","modalities":["audio","text"],"instructions":"You are K (Kelion), a friendly AI hologram assistant with a camera.\n\nCURRENT TIME: Friday, 6 February 2026 at 13:24 (UK timezone)\n\nCRITICAL LOCATION RULE:\n- NEVER assume the user is in any specific country or city\n- ALWAYS use ONLY the GPS location data provided to you\n- The user's REAL location is in the system context - USE IT\n- For \"tomorrow\" or future weather, use the SAME GPS location, not a different country\n- ONLY use a different location if the user EXPLICITLY names a city\n\nLOGIC VERIFICATION (CRITICAL):\nYou MUST continuously verify the LOGIC of everything:\n1. TIME AWARENESS: If user says \"good morning\" but it's evening, politely correct them: \"Actually, it's evening now - good evening!\"\n2. REALITY CHECK: Verify facts and statements against known reality\n3. CONSISTENCY: Point out contradictions in what user says (politely)\n4. CONTEXT: Consider time of day, season, location in your responses\n5. Be helpful when correcting - don't be rude, just gently inform\n\nCRITICAL SILENCE RULES:\n1. IGNORE background voices, TV, rad…(truncated)
```

### chat
- POST https://kelionai.app/.netlify/functions/chat
- status: 200 | latency_ms: 2347
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{"choices":[{"message":{"role":"assistant","content":"Hello! I'm Kimi, your AI assistant developed by Moonshot AI. I'm here to help you with a variety of tasks, from reading documents to answering questions. If you need assistance or have any inquiries, feel free to ask. Let's chat in English or Chinese, whichever you prefer. How can I assist you today?"}}],"model":"moonshot-v1-128k","source":"kimi"}
```

### chat-stream
- POST https://kelionai.app/.netlify/functions/chat-stream
- status: 200 | latency_ms: 1356
- json_ok: false | json_error: Unexpected token 'd', "data: {"to"... is not valid JSON
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
data: {"token":"¿","fullText":"¿"}

data: {"token":"Neces","fullText":"¿Neces"}

data: {"token":"itas","fullText":"¿Necesitas"}

data: {"token":" información","fullText":"¿Necesitas información"}

data: {"token":" sobre","fullText":"¿Necesitas información sobre"}

data: {"token":" la","fullText":"¿Necesitas información sobre la"}

data: {"token":" auditor","fullText":"¿Necesitas información sobre la auditor"}

data: {"token":"ía","fullText":"¿Necesitas información sobre la auditoría"}

data: {"token":" K","fullText":"¿Necesitas información sobre la auditoría K"}

data: {"token":"1","fullText":"¿Necesitas información sobre la auditoría K1"}

data: {"token":" o","fullText":"¿Necesitas información sobre la auditoría K1 o"}

data: {"token":" ayuda","fullText":"¿Necesitas información sobre la auditoría K1 o ayuda"}

data: {"token":" con","fullText":"¿Necesitas información sobre la auditoría K1 o ayuda con"}

data: {"token":" un","fullText":"¿Necesitas información sobre la auditoría K1 o ayuda con un"}

data: {"token":" proceso","fullText":"¿Necesitas información sobre la auditoría K1 o ayuda con un proceso"}

data: {"token":" relacionado","fullText":"¿Necesitas información sobre la audi…(truncated)
```

### smart-brain
- POST https://kelionai.app/.netlify/functions/smart-brain
- status: 400 | latency_ms: 309
- json_ok: true
- classification: NEEDS_INPUT
- hint: 400: endpoint needs body/params (normal for whisper/vision etc.)
- body_preview:

```
{"error":"Question is required"}
```

### vision-compliment
- POST https://kelionai.app/.netlify/functions/vision-compliment
- status: 200 | latency_ms: 772
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{"text":"It's great to have you here!"}
```

### memory-cleanup
- POST https://kelionai.app/.netlify/functions/memory-cleanup
- status: 200 | latency_ms: 1324
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{"success":true,"deleted":0,"checked_at":"2026-02-06T13:24:09.468Z","message":"Cleanup complete. Deleted 0 expired memories."}
```

### generate-image
- POST https://kelionai.app/.netlify/functions/generate-image
- status: 200 | latency_ms: 14322
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{"success":true,"imageUrl":"https://oaidalleapiprodscus.blob.core.windows.net/private/org-EaCn8ubYI8hJUCzjyTL4roJl/user-CNtfGSOd4lSz1net9nJyXD9Q/img-ksZPpWsiR5LTcyymP1panoNt.png?st=2026-02-06T12%3A24%3A24Z&se=2026-02-06T14%3A24%3A24Z&sp=r&sv=2026-02-06&sr=b&rscd=inline&rsct=image/png&skoid=8eb2c87c-0531-4dab-acb3-b5e2adddce6c&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2026-02-05T22%3A28%3A34Z&ske=2026-02-06T22%3A28%3A34Z&sks=b&skv=2026-02-06&sig=%2BThXJ8H9ATohdCkhJF9Ys5s/jIDWn%2BKMrBOfatYxZks%3D","revisedPrompt":"An image of a form or document titled 'K1 Audit', filled with various calculations, key figures, and applicable notes. The paper has a formal, professional look, with organized sections and clear headings. The document is set on a wooden desk. An ink pen is resting on the top of the form, indicating the ongoing process of an audit. Soft, warm light is coming from a small desk lamp, creating a focused working ambiance.","originalPrompt":"K1 audit test image"}
```

### dalle
- POST https://kelionai.app/.netlify/functions/dalle
- status: 500 | latency_ms: 599
- json_ok: true
- classification: SERVER_BUG
- hint: Unhandled exception in function. Add try/catch + structured error output + check logs.
- body_preview:

```
{"error":"400 Invalid value: '512x512'. Supported values are: '1024x1024', '1024x1792', and '1792x1024'."}
```

### run-migration
- POST https://kelionai.app/.netlify/functions/run-migration
- status: 503 | latency_ms: 873
- json_ok: true
- classification: DB
- hint: Database/storage connectivity/config issue (Supabase URL/key, tables, migrations).
- body_preview:

```
{"error":"Database connection failed","message":"getaddrinfo ENOTFOUND db.lqhkqznjdrkuvtpsgwhq.supabase.co","hint":"Check DATABASE_URL format and credentials","config_issue":true}
```

### whisper
- POST https://kelionai.app/.netlify/functions/whisper
- status: 400 | latency_ms: 237
- json_ok: true
- classification: NEEDS_INPUT
- hint: 400: endpoint needs body/params (normal for whisper/vision etc.)
- body_preview:

```
{"error":"Audio data required (base64)"}
```

### vision
- POST https://kelionai.app/.netlify/functions/vision
- status: 400 | latency_ms: 313
- json_ok: true
- classification: NEEDS_INPUT
- hint: 400: endpoint needs body/params (normal for whisper/vision etc.)
- body_preview:

```
{"error":"Image (base64) is required"}
```
