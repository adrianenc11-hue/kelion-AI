# K1 Forensic Audit
- time_utc: 2026-02-06T13:20:35.723Z
- base: https://kelionai.app
- timeoutMs: 25000
- authProvided: false

## Summary
- total: 12
- ok_2xx: 6
- needs_input_400: 3
- server_5xx: 3
- other_fail: 0

## 5xx Priority Fix List (proof-based)
- **memory-cleanup** (HTTP 500) — SERVER_BUG
  - hint: Unhandled exception in function. Add try/catch + structured error output + check logs.
  - proof: `{"error":"column user_memories.expires_at does not exist"}`
- **dalle** (HTTP 500) — SERVER_BUG
  - hint: Unhandled exception in function. Add try/catch + structured error output + check logs.
  - proof: `{"error":"400 Invalid value: '512x512'. Supported values are: '1024x1024', '1024x1792', and '1792x1024'."}`
- **run-migration** (HTTP 500) — DB
  - hint: Database/storage connectivity/config issue (Supabase URL/key, tables, migrations).
  - proof: `{"error":"getaddrinfo ENOTFOUND db.lqhkqznjdrkuvtpsgwhq.supabase.co","results":[],"hint":"Check DATABASE_URL format and credentials"}`

## Full Results
### health
- GET https://kelionai.app/.netlify/functions/health
- status: 200 | latency_ms: 1063
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{
  "healthy": true,
  "timestamp": "2026-02-06T13:20:36.648Z",
  "environment": {
    "configured": 7,
    "total": 7,
    "details": {
      "LLM_API_KEY": true,
      "TTS_API_KEY": true,
      "SEARCH_API_KEY": true,
      "DB_URL": true,
      "VECTOR_DB_API_KEY": true,
      "ENCRYPTION_KEY": true,
      "JWT_SIGNING_KEY": true
    }
  },
  "services": {
    "chat": "ready",
    "tts": "ready",
    "search": "ready",
    "memory": "ready",
    "encryption": "ready"
  }
}
```

### realtime-token
- GET https://kelionai.app/.netlify/functions/realtime-token
- status: 200 | latency_ms: 1319
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{"object":"realtime.session","id":"sess_D6G3BS900ICXDBEO2ddSG","model":"gpt-4o-realtime","modalities":["audio","text"],"instructions":"You are K (Kelion), a friendly AI hologram assistant with a camera.\n\nCURRENT TIME: Friday, 6 February 2026 at 13:20 (UK timezone)\n\nCRITICAL LOCATION RULE:\n- NEVER assume the user is in any specific country or city\n- ALWAYS use ONLY the GPS location data provided to you\n- The user's REAL location is in the system context - USE IT\n- For \"tomorrow\" or future weather, use the SAME GPS location, not a different country\n- ONLY use a different location if the user EXPLICITLY names a city\n\nLOGIC VERIFICATION (CRITICAL):\nYou MUST continuously verify the LOGIC of everything:\n1. TIME AWARENESS: If user says \"good morning\" but it's evening, politely correct them: \"Actually, it's evening now - good evening!\"\n2. REALITY CHECK: Verify facts and statements against known reality\n3. CONSISTENCY: Point out contradictions in what user says (politely)\n4. CONTEXT: Consider time of day, season, location in your responses\n5. Be helpful when correcting - don't be rude, just gently inform\n\nCRITICAL SILENCE RULES:\n1. IGNORE background voices, TV, rad…(truncated)
```

### chat
- POST https://kelionai.app/.netlify/functions/chat
- status: 200 | latency_ms: 1980
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{"choices":[{"message":{"role":"assistant","content":"Hello! How can I help you today? If you have any questions or need assistance, feel free to ask."}}],"model":"moonshot-v1-128k","source":"kimi"}
```

### chat-stream
- POST https://kelionai.app/.netlify/functions/chat-stream
- status: 200 | latency_ms: 2016
- json_ok: false | json_error: Unexpected token 'd', "data: {"to"... is not valid JSON
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
data: {"token":"¿","fullText":"¿"}

data: {"token":"Te","fullText":"¿Te"}

data: {"token":" ref","fullText":"¿Te ref"}

data: {"token":"ieres","fullText":"¿Te refieres"}

data: {"token":" a","fullText":"¿Te refieres a"}

data: {"token":" un","fullText":"¿Te refieres a un"}

data: {"token":" \"","fullText":"¿Te refieres a un \""}

data: {"token":"ping","fullText":"¿Te refieres a un \"ping"}

data: {"token":"\"","fullText":"¿Te refieres a un \"ping\""}

data: {"token":" en","fullText":"¿Te refieres a un \"ping\" en"}

data: {"token":" el","fullText":"¿Te refieres a un \"ping\" en el"}

data: {"token":" contexto","fullText":"¿Te refieres a un \"ping\" en el contexto"}

data: {"token":" de","fullText":"¿Te refieres a un \"ping\" en el contexto de"}

data: {"token":" auditor","fullText":"¿Te refieres a un \"ping\" en el contexto de auditor"}

data: {"token":"ía","fullText":"¿Te refieres a un \"ping\" en el contexto de auditoría"}

data: {"token":" K","fullText":"¿Te refieres a un \"ping\" en el contexto de auditoría K"}

data: {"token":"1","fullText":"¿Te refieres a un \"ping\" en el contexto de auditoría K1"}

data: {"token":"?","fullText":"¿Te refieres a un \"ping\" en el contexto de …(truncated)
```

### smart-brain
- POST https://kelionai.app/.netlify/functions/smart-brain
- status: 400 | latency_ms: 637
- json_ok: true
- classification: NEEDS_INPUT
- hint: 400: endpoint needs body/params (normal for whisper/vision etc.)
- body_preview:

```
{"error":"Question is required"}
```

### vision-compliment
- POST https://kelionai.app/.netlify/functions/vision-compliment
- status: 200 | latency_ms: 1436
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{"text":"It's great to have you here!"}
```

### memory-cleanup
- POST https://kelionai.app/.netlify/functions/memory-cleanup
- status: 500 | latency_ms: 1216
- json_ok: true
- classification: SERVER_BUG
- hint: Unhandled exception in function. Add try/catch + structured error output + check logs.
- body_preview:

```
{"error":"column user_memories.expires_at does not exist"}
```

### generate-image
- POST https://kelionai.app/.netlify/functions/generate-image
- status: 200 | latency_ms: 13702
- json_ok: true
- classification: OTHER
- hint: Check response body/headers.
- body_preview:

```
{"success":true,"imageUrl":"https://oaidalleapiprodscus.blob.core.windows.net/private/org-EaCn8ubYI8hJUCzjyTL4roJl/user-CNtfGSOd4lSz1net9nJyXD9Q/img-1rNO7AjUhRD2yb35yEJ4OcrK.png?st=2026-02-06T12%3A20%3A58Z&se=2026-02-06T14%3A20%3A58Z&sp=r&sv=2026-02-06&sr=b&rscd=inline&rsct=image/png&skoid=38e27a3b-6174-4d3e-90ac-d7d9ad49543f&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2026-02-05T22%3A20%3A02Z&ske=2026-02-06T22%3A20%3A02Z&sks=b&skv=2026-02-06&sig=1dW4HZWW48K33qRZRHNtYNMCUfWPelNp%2B9%2BzsROwHek%3D","revisedPrompt":"An image illustrating the concept of a K1 audit, featuring a large balance sheet with various calculations on it. In the background, a diverse group of professionals can be seen reviewing the numbers, consisting of an Asian female auditor, a Middle Eastern male accountant, and a Black female data analyst. They are surrounded by pie charts, bar graphs, and spreadsheets of financial data on a large projector screen.","originalPrompt":"K1 audit test image"}
```

### dalle
- POST https://kelionai.app/.netlify/functions/dalle
- status: 500 | latency_ms: 1354
- json_ok: true
- classification: SERVER_BUG
- hint: Unhandled exception in function. Add try/catch + structured error output + check logs.
- body_preview:

```
{"error":"400 Invalid value: '512x512'. Supported values are: '1024x1024', '1024x1792', and '1792x1024'."}
```

### run-migration
- POST https://kelionai.app/.netlify/functions/run-migration
- status: 500 | latency_ms: 706
- json_ok: true
- classification: DB
- hint: Database/storage connectivity/config issue (Supabase URL/key, tables, migrations).
- body_preview:

```
{"error":"getaddrinfo ENOTFOUND db.lqhkqznjdrkuvtpsgwhq.supabase.co","results":[],"hint":"Check DATABASE_URL format and credentials"}
```

### whisper
- POST https://kelionai.app/.netlify/functions/whisper
- status: 400 | latency_ms: 667
- json_ok: true
- classification: NEEDS_INPUT
- hint: 400: endpoint needs body/params (normal for whisper/vision etc.)
- body_preview:

```
{"error":"Audio data required (base64)"}
```

### vision
- POST https://kelionai.app/.netlify/functions/vision
- status: 400 | latency_ms: 570
- json_ok: true
- classification: NEEDS_INPUT
- hint: 400: endpoint needs body/params (normal for whisper/vision etc.)
- body_preview:

```
{"error":"Image (base64) is required"}
```
